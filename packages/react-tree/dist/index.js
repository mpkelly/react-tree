!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var n="object"==typeof exports?t(require("react")):t(e.React);for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(e){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="./dist",n(n.s=7)}([function(e,t,n){"use strict";var r=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getSelectedNodeIds=t.toSubList=t.toList=t.findTreeNodeById=t.toTreeNodes=t.toTreeNode=t.toFlatNodes=t.toFlatNode=void 0,t.toFlatNode=(e,t)=>{const{children:n}=e,o=r(e,["children"]);return Object.assign(Object.assign({},o),{parentId:t})},t.toFlatNodes=(e,n)=>{let r=[];return e.forEach(e=>{r.push(t.toFlatNode(e,n)),r=r.concat(t.toFlatNodes(e.children,e.id))}),r},t.toTreeNode=e=>Object.assign(Object.assign({},e),{children:[]}),t.toTreeNodes=e=>{const n=Object.create(null);e.forEach(e=>{n[e.id]=t.toTreeNode(e)});const r=[];return e.forEach(e=>{void 0!==e.parentId&&n[e.parentId]?n[e.parentId].children.push(n[e.id]):r.push(n[e.id])}),r},t.findTreeNodeById=(e,n,r=null)=>{for(const o of n){if(o.id===e)return{node:o,parent:r};const n=t.findTreeNodeById(e,o.children,o);if(n)return n}return null},t.toList=(e,n=!0,r=[])=>(e.forEach(e=>{r.push(t.toFlatNode(e,e.parentId)),(n||void 0===e.expanded||e.expanded)&&t.toList(e.children,n,r)}),r),t.toSubList=(e,n)=>{const r=t.toList(e);let o=r.length,d=0;return n.forEach(e=>{const t=r.findIndex(t=>t.id===e);t>=d&&(d=t),t<=o&&(o=t)}),r.slice(o,d+1)},t.getSelectedNodeIds=(e,n)=>{const r=t.toSubList(e,n).filter(e=>n.includes(e.id));return t.toTreeNodes(r).map(e=>e.id)}},function(t,n){t.exports=e},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.hasOwnProperty.call(e,n)&&r(t,e,n);return o(t,e),t},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(e);o<r.length;o++)t.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(e,r[o])&&(n[r[o]]=e[r[o]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=t.useTree=t.TreeContext=void 0;const s=d(n(1)),a=n(3),c=n(4),l=n(9),u=n(0),f=n(10),p=n(5);t.TreeContext=s.createContext(void 0),t.useTree=()=>s.useContext(t.TreeContext);const b={padding:0},g={listStyle:"none"};t.Tree=s.forwardRef((e,n)=>{const{nodes:r,nameProperty:o,renderElement:d,onChange:i,onPaste:c,onSelectionChange:g,sortFunction:v,disableDrag:y,schema:O,disableSelection:j,disableMultiSelection:m,disableCut:_,disableCopy:S,renderDragImage:T,initialFocusedNodeId:x,labelledbyId:I}=e,D=u.toTreeNodes(r),[w,E]=s.useState(),[N,C]=s.useState();v?a.sortTree(D,v):a.sortTree(D,a.createAlphaNumericSort(o));const P=void 0!==x?[x]:[],{selection:k,handleClick:M,handleSelectionChange:L,handleBlur:A}=l.useSelectionState(D,g,j,m,P),B=[...k.selected,w],F=e=>{i&&i(e,"expanded",!e[0].expanded)};f.useKeyboard(D,k,o,L,()=>{const e=k.selected[0];if(void 0!==e)if(k.cut.length){if(!i)return;const t=r.filter(e=>k.cut.includes(e.id));p.isMoveValid(r,t.map(e=>e.id),!0,e,O)&&i(t,"parentId",e)}else{if(!c)return;const t=r.filter(e=>k.copied.includes(e.id));if(p.isMoveValid(r,t.map(e=>e.id),!1,e,O)){const t=u.getSelectedNodeIds(D,k.copied).map(e=>{const t=u.findTreeNodeById(e,D);return null==t?void 0:t.node});c(t,e)}}},F,!!_,!!S);const K=s.useCallback((e,t=0)=>{const n=[];return e.forEach((r,o)=>{const i=d(r,t);let a=[];const c=void 0===r.expanded||r.expanded;c&&(a=K(r.children,t+1));const l={};r.id===N&&N!==r.parentId&&(l["data-rt-drop-valid"]=!0),r.children.length&&(l["aria-expanded"]=c);const u=k.focused&&r.id===k.selected[0];n.push(s.default.createElement(h,Object.assign({node:r,index:o,depth:t,setsize:e.length,focused:u,nodeItem:i},l),a))}),n},[N,k,d]),V=K(D),z={overId:N,handleDrag:E,handleOver:e=>{p.isMoveValid(r,B,!0,e,O)?C(e):C(void 0)},handleDrop:(e,t)=>{if(void 0!==t){const n=r.find(t=>String(t.id)===String(e));if(n&&String(n.parentId)!==String(t)&&i){const e=u.getSelectedNodeIds(D,[...k.selected,w]).map(e=>r.find(t=>t.id===e));i(e,"parentId",t)}}C(void 0),E(void 0)},handleToggleCollapse:F,disableDrag:!!y,selection:k,handleSelectionChange:L,handleClick:M,renderDragImage:T,dragId:w};return s.default.createElement(t.TreeContext.Provider,{value:z},s.default.createElement("ul",{ref:n,"data-rt-tree":!0,role:"tree",style:b,onBlur:A,"aria-labelledby":I},V))});const h=s.memo(e=>{const{node:t,index:n,depth:r,setsize:o,focused:d,nodeItem:a,children:l}=e,u=i(e,["node","index","depth","setsize","focused","nodeItem","children"]);return s.default.createElement("li",Object.assign({"data-rt-element-wrapper":t.id,role:"treeitem","aria-level":r+1,"aria-setsize":o,"aria-posinset":n+1,tabIndex:d?0:-1},u,{style:g,key:t.id}),s.default.createElement(c.TreeElement,{node:t,depth:r},a),l&&s.default.createElement("ul",{role:"group",style:b},l))})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.sortTree=t.createAlphaNumericSort=void 0,t.createAlphaNumericSort=e=>(t,n)=>String(t[e]).localeCompare(String(n[e])),t.sortTree=(e,n)=>{e.sort(n),e.forEach(e=>t.sortTree(e.children,n))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeElement=void 0;const o=r(n(1)),d=n(8);t.TreeElement=e=>{const{node:t,children:n,dragDisabled:r}=e,{id:i}=t,s=d.useTreeElementState(e),a=!(t.dragDisabled||r);return o.default.createElement("div",Object.assign({key:i,draggable:a,role:"treeitem"},s),n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isMoveValid=void 0;const r=n(6),o=n(0);t.isMoveValid=(e,t,n=!0,d,i)=>{if(void 0===d)return!1;for(const s of t){if(s===d)return!1;const t=e.find(e=>e.id===s);if(t){if(t.dragDisabled)return!1;if(n&&t.parentId===d)return!1;const a=e.find(e=>e.id===d);if(a){const n=o.findTreeNodeById(s,o.toTreeNodes(e));if(n&&n.node){if(o.toFlatNodes(n.node.children).find(e=>e.id===d))return!1}if(!r.isDropAllowed(t,a,i))return!1}}}return!0}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDropAllowed=void 0,t.isDropAllowed=(e,t,n)=>{if(!n)return!0;const r=n.rules?n.rules[t.type]:void 0;return(!r||0!==r.length)&&(!(r&&!r.includes(e.type))&&(!n.isDropAllowed||n.isDropAllowed(e,t)))}},function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n),Object.defineProperty(e,r,{enumerable:!0,get:function(){return t[n]}})}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),o=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||t.hasOwnProperty(n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),o(n(3),t),o(n(0),t),o(n(2),t),o(n(5),t),o(n(4),t),o(n(6),t),o(n(11),t)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTreeElementState=void 0;const r=n(2);t.useTreeElementState=e=>{const{node:t,depth:n,dragDisabled:o}=e,{overId:d,dragId:i,handleDrag:s,handleOver:a,handleDrop:c,disableDrag:l,selection:u,handleClick:f,renderDragImage:p}=r.useTree(),b=u.selected.includes(t.id),g=u.cut.includes(t.id),h=u.copied.includes(t.id),v=u.selected.slice();void 0===i||u.selected.includes(i)||v.push(i);const y={"data-rt-element":t.id,"data-rt-type":t.type,"data-rt-depth":n,draggable:!o,onClick:e=>{f(e,t.id)}};return b&&(y["data-rt-selected"]=!0),g&&(y["data-rt-cut"]=!0),h&&(y["data-rt-copied"]=!0),l?{}:(o||t.dragDisabled||(y.onDragStart=e=>{e.dataTransfer.setData("text/rt-id",String(t.id)),e.dataTransfer.dropEffect="move",p&&e.dataTransfer.setDragImage(p(v),0,0),s(t.id)}),y.onDragOver=e=>{a(t.id),e.preventDefault(),e.dataTransfer.dropEffect="move"},y.onDragLeave=()=>{a(void 0)},y.onDrop=e=>{if(e.preventDefault(),void 0!==d&&d===t.id){const n=e.dataTransfer.getData("text/rt-id");c(n,t.id)}},y)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useSelectionState=void 0;const r=n(1),o=n(0);t.useSelectionState=(e,t,n,d,i=[])=>{const[s,a]=r.useState({focused:!!i.length,selected:i,cut:[],copied:[]}),c=r.useCallback(e=>{let n=e;"function"==typeof e&&(n=e(s)),n.focused=!0,a(n),t&&t(n)},[s,a,t]),l=r.useCallback((t,r)=>{if(!n)if(d)c(e=>Object.assign(Object.assign({},e),{selected:[r]}));else if(t.shiftKey&&!s.selected.includes(r)){const t=[r,...s.selected],n=o.toSubList(e,t).map(e=>e.id);c(e=>Object.assign(Object.assign({},e),{selected:n}))}else if(t.metaKey)if(s.selected.includes(r)){const e=s.selected.filter(e=>e!==r);c(t=>Object.assign(Object.assign({},t),{selected:e}))}else{const e=[r,...s.selected];c(t=>Object.assign(Object.assign({},t),{selected:e}))}else c(e=>Object.assign(Object.assign({},e),{selected:[r]}))},[e,s,n,d,c]);return{selection:s,handleClick:l,handleSelectionChange:c,handleBlur:()=>{const e=Object.assign(Object.assign({},s),{focused:!1});a(e),t&&t(e)}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useKeyboard=void 0;const r=n(1),o=n(0);t.useKeyboard=(e,t,n,d,i,s,a,c)=>{const l=r.useRef(0),u=o.toList(e,!1),f=e=>{l.current=0,d(t=>Object.assign(Object.assign({},t),{selected:[e]}))},p=(e,n)=>{const{selected:r}=t;if(r.length){const t=u.findIndex(e=>e.id===r[0]),o=u[t+n];o&&(e.shiftKey?(l.current>0&&-1===n||l.current<0&&1===n?d(e=>Object.assign(Object.assign({},e),{selected:r.slice(1)})):d(e=>Object.assign(Object.assign({},e),{selected:[o.id,...r]})),l.current+=n):f(o.id))}},b=(n,r)=>{const{selected:d}=t;if(d.length){const t=o.findTreeNodeById(d[0],e),i=null==t?void 0:t.node;i&&(-1===r?i.children.length&&i.expanded?s([i]):p(n,-1):i.children.length&&!i.expanded?s([i]):p(n,1))}},g=()=>{d(e=>Object.assign(Object.assign({},e),{copied:[],cut:[]}))},h=e=>{const r=u.findIndex(e=>e.id===t.selected[0])+1,o=e.toLowerCase();let i=u.slice(r).find(e=>String(e[n]).toLowerCase().startsWith(o));i||(i=u.slice(0,r).find(e=>String(e[n]).toLowerCase().startsWith(o))),i&&d(e=>Object.assign(Object.assign({},e),{selected:[i.id]}))},v=n=>{if(t.focused)switch(n.key){case"ArrowDown":p(n,1);break;case"ArrowUp":p(n,-1);break;case"ArrowLeft":b(n,-1);break;case"ArrowRight":b(n,1);break;case"Home":f(u[0].id);break;case"End":f(u[u.length-1].id);break;case"Escape":g();break;case" ":(()=>{if(t.selected.length){const e=u.find(e=>e.id===t.selected[0]);e&&s([e])}})();break;case"*":(()=>{const n=o.findTreeNodeById(t.selected[0],e);if(n){const{node:e,parent:t}=n;if(t){const e=t.children.filter(e=>e.children.length&&!e.expanded);e.length&&s(e)}else e&&!(null==e?void 0:e.expanded)&&s([e])}})();break;default:if(n.metaKey)switch(n.key){case"x":(e=>{a||t.selected.length&&(e.preventDefault(),d(e=>Object.assign(Object.assign({},e),{copied:[],cut:t.selected.slice()})))})(n);break;case"c":(e=>{c||t.selected.length&&(e.preventDefault(),d(e=>Object.assign(Object.assign({},e),{cut:[],copied:t.selected.slice()})))})(n);break;case"v":(e=>{(t.cut.length||t.copied.length)&&(e.preventDefault(),i(),g())})(n);break;default:h(n.key)}else h(n.key)}};r.useEffect(()=>(window.addEventListener("keydown",v),()=>{window.removeEventListener("keydown",v)}))}},function(e,t,n){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CollapseToggle=void 0;const o=r(n(1)),d=n(2);t.CollapseToggle=e=>{const{children:t,node:n}=e,r=!n.expanded,{handleToggleCollapse:i}=d.useTree();return o.default.createElement("div",{onClick:()=>i([n]),"data-rt-collapse-toggle":!0,"aria-pressed":r,tabIndex:0,role:"button"},t)}}])}));