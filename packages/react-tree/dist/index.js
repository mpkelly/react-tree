!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t(require("react"));else if("function"==typeof define&&define.amd)define(["react"],t);else{var r="object"==typeof exports?t(require("react")):t(e.React);for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,(function(e){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="./dist",r(r.s=5)}([function(t,r){t.exports=e},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__setModuleDefault||(Object.create?function(e,t){Object.defineProperty(e,"default",{enumerable:!0,value:t})}:function(e,t){e.default=t}),d=this&&this.__importStar||function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var r in e)Object.hasOwnProperty.call(e,r)&&n(t,e,r);return o(t,e),t};Object.defineProperty(t,"__esModule",{value:!0}),t.Tree=t.useTreeContext=t.TreeContext=void 0;const i=d(r(0)),a=r(2),l=r(3),u=r(4);t.TreeContext=i.createContext(void 0),t.useTreeContext=()=>i.useContext(t.TreeContext),t.Tree=e=>{const{nodes:r,renderElement:n,onChange:o,sortFunction:d,readOnly:c,schema:s}=e,[f,p]=i.useState(),[v,h]=i.useState(),b=a.toTreeNodes(r);d&&a.sortTree(b,d);const y=i.useCallback(e=>{if(void 0===e)return void h(void 0);if(f===e)return;const t=r.find(e=>e.id===f);if(t){if(t.parentId==e)return!1;const n=r.find(t=>t.id===e);if(n){const r=a.findTreeNodeById(f,b);if(r&&r.node){if(a.toFlatNodes(r.node.children).find(t=>t.id==e))return}u.isDropAllowed(t,n,s)&&h(e)}}},[f]),g=(e,t=0)=>{const r=[];return e.forEach(e=>{const o=n(e,t);let d=[];(void 0===e.expanded||e.expanded)&&(d=g(e.children,t+1));let a={};e.id===v&&v!==e.parentId&&(a["data-rt-drop-valid"]=!0),r.push(i.default.createElement("div",Object.assign({"data-rt-element":!0},a),i.default.createElement(l.TreeElement,{node:e,depth:t},o),d))}),r},O=g(b),T={overId:v,handleDrag:p,handleOver:y,handleDrop:(e,t)=>{if(t){const n=r.find(t=>String(t.id)===String(e));n&&String(n.parentId)!==String(t)&&o&&o(n,"parentId",t)}h(void 0)},handleToggleCollapse:e=>{console.log("Node",e.expanded,e),o&&o(e,"expanded",!e.expanded)},readOnly:Boolean(c)};return i.default.createElement(t.TreeContext.Provider,{value:T},i.default.createElement("div",{"data-rt-tree":!0},O))}},function(e,t,r){"use strict";var n=this&&this.__rest||function(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&Object.prototype.propertyIsEnumerable.call(e,n[o])&&(r[n[o]]=e[n[o]])}return r};Object.defineProperty(t,"__esModule",{value:!0}),t.findTreeNodeById=t.toTreeNodes=t.toTreeNode=t.toFlatNodes=t.toFlatNode=t.sortTree=t.createAlphaNumericSort=void 0,t.createAlphaNumericSort=e=>(t,r)=>String(t[e]).localeCompare(String(r[e])),t.sortTree=(e,r)=>{e.sort(r),e.forEach(e=>{t.sortTree(e.children,r)})},t.toFlatNode=(e,t)=>{const{children:r}=e,o=n(e,["children"]);return Object.assign(Object.assign({},o),{parentId:t})},t.toFlatNodes=(e,r)=>{let n=[];return e.forEach(e=>{n.push(t.toFlatNode(e,r)),n=n.concat(t.toFlatNodes(e.children,e.id))}),n},t.toTreeNode=e=>Object.assign(Object.assign({},e),{children:[]}),t.toTreeNodes=e=>{const r=Object.create(null);e.forEach(e=>r[e.id]=t.toTreeNode(e));const n=[];return e.forEach(e=>{e.parentId?r[e.parentId].children.push(r[e.id]):n.push(r[e.id])}),n},t.findTreeNodeById=(e,r,n=null)=>{for(let o of r){if(o.id===e)return{node:o,parent:n};{const r=t.findTreeNodeById(e,o.children,o);if(r)return r}}return null}},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.TreeElement=void 0;const o=n(r(0)),d=r(7);t.TreeElement=e=>{const{node:t,children:r}=e,{id:n}=t,i=d.useTreeElementState(e);return o.default.createElement("div",Object.assign({key:n},i),r)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isDropAllowed=void 0,t.isDropAllowed=(e,t,r)=>{if(!r)return!0;const n=r[t.type];return!n||0!==n.length&&(!!n.includes(e.type)&&(!r.isDropAllowed||r.isDropAllowed(e,t)))}},function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r),Object.defineProperty(e,n,{enumerable:!0,get:function(){return t[r]}})}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),o=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||t.hasOwnProperty(r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),o(r(6),t),o(r(2),t),o(r(1),t),o(r(3),t),o(r(4),t)},function(e,t,r){"use strict";var n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0}),t.CollapseToggle=void 0;const o=n(r(0)),d=r(1);t.CollapseToggle=e=>{const{children:t,node:r}=e,n=!r.expanded,{handleToggleCollapse:i}=d.useTreeContext();if(!i)throw Error("It looks like you're trying to use CollapseToggle outside of the <Tree/> scope");return o.default.createElement("div",{"data-rt-collapse-toggle":!0,"data-rt-collapsed":n,onClick:()=>i(r)},t)}},function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.useTreeElementState=void 0;const n=r(0),o=r(1);t.useTreeElementState=e=>{const{node:t,depth:r,dragDisabled:d}=e,{overId:i,handleDrag:a,handleOver:l,handleDrop:u,readOnly:c}=o.useTreeContext();if(c)return{};let s=void 0;d||(s=e=>{e.dataTransfer.setData("text/rt-id",String(t.id)),e.dataTransfer.dropEffect="move",a(t.id)});const f=n.useCallback(e=>{if(e.preventDefault(),i&&i==t.id){const r=e.dataTransfer.getData("text/rt-id");u(r,t.id)}},[i]);return{"data-rt-node":t.id,"data-rt-type":t.type,"data-rt-depth":r,draggable:!d,onDragStart:s,onDragOver:e=>{l(t.id),e.preventDefault(),e.dataTransfer.dropEffect="move"},onDragLeave:()=>{l(void 0)},onDrop:f}}}])}));